<!DOCTYPE html><html><head><meta charset='UTF-8'><title>Emulator Hub</title><script type='module' src='engine-switcher.js'>
  import { connectToSignalingServer, broadcastInput } from './signaling.js';
  import { initVoiceStream, stopVoiceStream } from './voice-webrtc.js';

  function startMultiplayer() {
    const name = document.getElementById('playerName').value;
    connectToSignalingServer(name);
    initVoiceStream();
  }

  document.getElementById('voiceToggle').addEventListener('change', (e) => {
    if (e.target.value === 'on' || e.target.value === 'unmute') {
      initVoiceStream();
    } else {
      stopVoiceStream();
    }
  });

  import { generateJoinCode, redirectToRoom } from './matchmaking.js';

  function createRoom() {
    const code = generateJoinCode();
    alert('Room Code: ' + code + '\nLink: ' + window.location.origin + window.location.pathname + '?room=' + code);
    redirectToRoom(code);
  }

  function joinRoom() {
    const code = document.getElementById('roomInput').value.trim().toUpperCase();
    if (code) redirectToRoom(code);
  }
</script></head><body><div id='emulatorContainer'>Emulator Area</div><div>
  <h2>ðŸŽ® Multiplayer Matchmaking</h2>
  <button onclick="createRoom()">Create Game</button>
  <input type="text" id="roomInput" placeholder="Enter Join Code" />
  <button onclick="joinRoom()">Join Game</button>

  <label>Player Name: <input type="text" id="playerName" /></label>
  <label>Voice Chat:
    <select id="voiceToggle">
      <option value="off">Off</option>
      <option value="on">On</option>
      <option value="mute">Mute Mic</option>
      <option value="unmute">Unmute Mic</option>
    </select>
  </label>
  <button onclick="startMultiplayer()">Start Multiplayer</button>
</div>
<script type="module">
  import { initMultiplayer } from './multiplayer.js';
  import { toggleVoiceChat } from './voicechat.js';

  function startMultiplayer() {
    const name = document.getElementById('playerName').value;
    initMultiplayer(name);
  }

  document.getElementById('voiceToggle').addEventListener('change', (e) => {
    toggleVoiceChat(e.target.value);
  });

  import { connectToSignalingServer, broadcastInput } from './signaling.js';
  import { initVoiceStream, stopVoiceStream } from './voice-webrtc.js';

  function startMultiplayer() {
    const name = document.getElementById('playerName').value;
    connectToSignalingServer(name);
    initVoiceStream();
  }

  document.getElementById('voiceToggle').addEventListener('change', (e) => {
    if (e.target.value === 'on' || e.target.value === 'unmute') {
      initVoiceStream();
    } else {
      stopVoiceStream();
    }
  });

  import { generateJoinCode, redirectToRoom } from './matchmaking.js';

  function createRoom() {
    const code = generateJoinCode();
    alert('Room Code: ' + code + '\nLink: ' + window.location.origin + window.location.pathname + '?room=' + code);
    redirectToRoom(code);
  }

  function joinRoom() {
    const code = document.getElementById('roomInput').value.trim().toUpperCase();
    if (code) redirectToRoom(code);
  }
</script>
</body></html>